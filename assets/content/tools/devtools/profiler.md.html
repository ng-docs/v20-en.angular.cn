<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">分析你的应用性能</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/tools/devtools/profiler.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p><strong>Profiler</strong> 标签页可以让你可视化 Angular 变更检测的执行过程。
这对于确定变更检测何时以及如何影响你的应用性能非常有用。</p>
<img src="assets/images/guide/devtools/profiler.png" alt="A screenshot of the 'Profiler' tab which reads 'Click the play button to start a new recording, or upload a json file containing profiler data.' Next to this is a record button to begin recording a new profile as well as a file picker to select an existing profile.">

<p>Profiler 标签页允许你开始分析当前应用，或从之前的运行中导入现有的分析文件。
要开始分析你的应用，请将鼠标悬停在 <strong>Profiler</strong> 标签页左上角的圆圈上，然后点击 <strong>Start recording</strong>（开始录制）。</p>
<p>在分析期间，Angular DevTools 会捕获执行事件，例如变更检测和生命周期钩子的执行。
与你的应用交互以触发变更检测并生成 Angular DevTools 可以使用的数据。
要完成录制，再次点击圆圈以 <strong>Stop recording</strong>（停止录制）。</p>
<p>你也可以导入现有的录制文件。
在 <a href="tools/devtools#import-and-export-recordings">导入录制文件</a> 部分阅读关于此特性的更多信息。</p>

  <h2 id="understand-your-applications-execution">
    <a href="#understand-your-applications-execution" class="docs-anchor" tabindex="-1" aria-label="Link to Understand your application's execution">了解你的应用的执行过程</a>
  </h2>
  <p>在录制或导入分析文件后，Angular DevTools 会显示变更检测周期的可视化视图。</p>
<img src="assets/images/guide/devtools/default-profiler-view.png" alt="A screenshot of the 'Profiler' tab after a profile has been recorded or uploaded. It displays a bar chart illustrating various change detection cycles with some text which reads 'Select a bar to preview a particular change detection cycle'.">

<p>序列中的每个条形都代表你应用中的一个变更检测周期。
条形越高，表示应用在此周期中运行变更检测所花费的时间越长。
当你选择一个条形时，DevTools 会显示关于它的有用信息，包括：</p>

  <ul class="docs-list">
    <li>一个条形图，其中包含在此周期中捕获的所有组件和指令</li>
<li>Angular 在此周期中运行变更检测所花费的时间。</li>
<li>用户体验到的估计帧率。</li>
<li>触发变更检测的来源。</li>

  </ul>
  <img src="assets/images/guide/devtools/profiler-selected-bar.png" alt="A screenshot of the 'Profiler' tab. A single bar has been selected by the user and a nearby dropdown menu displays 'Bar chart`, showing a second bar chart underneath it. The new chart has two bars which take up the majority of the space, one labeled `TodosComponent` and the other labeled `NgForOf`. The other bars are small enough to be negligible in comparison.">


  <h2 id="understand-component-execution">
    <a href="#understand-component-execution" class="docs-anchor" tabindex="-1" aria-label="Link to Understand component execution">了解组件执行过程</a>
  </h2>
  <p>点击变更检测周期后显示的条形图，会显示关于你的应用在该特定组件或指令中运行变更检测所花费时间的详细视图。</p>
<p>This example shows the total time spent by the <a href="/api/common/NgForOf"><code>NgForOf</code></a> directive and which method was called on it.</p>
<img src="assets/images/guide/devtools/directive-details.png" alt="A screenshot of the 'Profiler' tab where the `NgForOf` bar is selected. A detailed view of `NgForOf` is visible to the right where it lists 'Total time spent: 1.76 ms'. It includes a with exactly one row, listing `NgForOf` as a directives with an `ngDoCheck` method which took 1.76 ms. It also includes a list labeled 'Parent Hierarchy' containing the parent components of this directive.">


  <h2 id="hierarchical-views">
    <a href="#hierarchical-views" class="docs-anchor" tabindex="-1" aria-label="Link to Hierarchical views">分层视图</a>
  </h2>
  <img src="assets/images/guide/devtools/flame-graph-view.png" alt="A screenshot of the 'Profiler' tab. A single bar has been selected by the user and a nearby dropdown menu now displays 'Flame graph', showing a flame graph underneath it. The flame graph starts with a row called 'Entire application' and another row called 'AppComponent'. Beneath those, the rows start to break up into multiple items, starting with `[RouterOutlet]` and `DemoAppComponent` on the third row. A few layers deep, one cell is highlighted red.">

<p>你也可以在类似火焰图的视图中可视化变更检测的执行过程。</p>
<p>图中的每个瓦片代表屏幕上渲染树中特定位置的元素。
例如，考虑一个变更检测周期，其中 <code>LoggedOutUserComponent</code> 被移除，并且 Angular 在其位置渲染了 <code>LoggedInUserComponent</code>。在这种情况下，两个组件都将显示在同一个瓦片中。</p>
<p>The x-axis represents the full time it took to render this change detection cycle.
The y-axis represents the element hierarchy. Running change detection for an element requires rendering its directives and child components.
Together, this graph visualizes which components are taking the longest time to render and where that time is going.</p>
<p>每个瓦片的颜色都取决于 Angular 在那里花费的时间。
Angular DevTools 根据相对于渲染时间最长的瓦片所花费的时间来确定颜色的强度。</p>
<p>当你点击某个瓦片时，你会在右侧面板中看到关于它的详细信息。
双击瓦片会放大它，以便你可以更轻松地查看其嵌套的子级。</p>

  <h2 id="debug-change-detection-and-onpush-components">
    <a href="#debug-change-detection-and-onpush-components" class="docs-anchor" tabindex="-1" aria-label="Link to Debug change detection and <code>OnPush</code> components">调试变更检测和 <code>OnPush</code> 组件</a>
  </h2>
  <p>通常，对于任何给定的变更检测帧，该图都会可视化<em>渲染</em>应用所花费的时间。但是，某些组件（例如 <code>OnPush</code> 组件）仅在其输入属性更改时才会重新渲染。对于特定帧，在没有这些组件的情况下可视化火焰图可能很有用。</p>
<p>要仅可视化变更检测帧中经历了变更检测过程的组件，请选中火焰图上方顶部的 <strong>Change detection</strong>（变更检测）复选框。</p>
<p>此视图突出显示了所有经历了变更检测的组件，并将未经历变更检测的组件显示为灰色，例如未重新渲染的 <code>OnPush</code> 组件。</p>
<img src="assets/images/guide/devtools/debugging-onpush.png" alt="A screenshot of the 'Profiler' tab displaying a flame chart visualization of a change detection cycle. A checkbox labeled 'Show only change detection' is now checked. The flame graph looks very similar to before, however the color of components has changed from orange to blue. Several tiles labeled `[RouterOutlet]` are no longer highlighted with any color.">


  <h2 id="import-and-export-recordings">
    <a href="#import-and-export-recordings" class="docs-anchor" tabindex="-1" aria-label="Link to Import and export recordings">导入和导出录制文件</a>
  </h2>
  <p>点击已录制的分析会话右上角的 <strong>Save Profile</strong>（保存分析文件）按钮，将其导出为 JSON 文件并保存到磁盘。
稍后，通过点击 <strong>Choose file</strong>（选择文件）输入框，在分析器的初始视图中导入该文件。</p>
<img src="assets/images/guide/devtools/save-profile.png" alt="A screenshot of the 'Profiler' tab displaying change detection cycles. On the right side a 'Save Profile' button is visible.">
